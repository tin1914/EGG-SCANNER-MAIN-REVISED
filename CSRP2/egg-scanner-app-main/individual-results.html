<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan Results - Fresh Eggs Scanner</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Header Navigation -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="nav-right">
                    <a href="index.html" class="nav-btn btn-red">Home</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-left">
                        <h1 class="hero-title">
                             Your pocket <span class="text-yellow">Egg-spert in <br>
                            Freshness
                        </h1>
                        <p class="hero-description">
                            Meet your kitchen‚Äôs new best friend! This AI-powered tool scans your eggs and tells you if they‚Äôre fresh, No more egg-speriments gone wrong.
                        </p>
                        <a href="#upload-section" onclick = "gotoindividualupload()" class="btn btn-red hero-cta">SCAN YOUR EGGS HERE</a>
                        <p class="click-here">Click here!</p>
                    </div>
                    <div class="hero-right">
                        <div class="yellow-circle"></div>
                        <div class="egg-bowl">
                            <div class="bowl-container">
                                <div class="bowl"></div>
                                <div class="eggs">
                                    <div class="egg"></div>
                                    <div class="egg"></div>
                                    <div class="egg"></div>
                                    <div class="egg"></div>
                                    <div class="egg"></div>
                                    <div class="egg"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Process Steps Section -->
        <section class="process-steps">
            <div class="container">
                <div class="steps-grid">
                    <div class="step">
                        <div class="step-icon yellow">1</div>
                        <h3 class="step-title">Upload<br>the Image<br>of the Eggs</h3>
                    </div>
                    <div class="step">
                        <div class="step-icon yellow">2</div>
                        <h3 class="step-title">Wait for the<br>Results</h3>
                    </div>
                    <div class="step">
                        <div class="step-icon green">3</div>
                        <h3 class="step-title">Results Are<br>Ready!</h3>
                    </div>
                </div>
            </div>
        </section>

        <!-- Uploaded Image Viewer Section -->
        <section class="image-viewer-section">
            <div class="container">
                <h2 class="section-title">Scanned Image</h2>
                <div class="image-viewer">
                    <div class="image-container">
                        <img src="https://via.placeholder.com/400x400/4CAF50/000000?text=Single+Egg+Scan" 
                             alt="Uploaded single egg scan" 
                             class="scanned-image" 
                             id="scannedImage">
                        <div class="image-overlay">
                            <button class="zoom-btn" onclick="openImageModal()">üîç View Full Size</button>
                        </div>
                    </div>
                    <p class="image-caption">Your uploaded single egg image with scan result</p>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section">
            <div class="container">
                <div class="results-container">
                    <h2 class="results-header">RESULTS COMPLETE</h2>
                    
                    <div class="result-status">
                        <div class="status-label fresh-status">FRESH</div>
                    </div>
                    
                    <div class="result-metrics">
                        <div class="metric">
                            <span class="metric-label">YOLK:</span>
                            <span class="metric-value">90%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">EGG WHITE</span>
                            <span class="metric-value">95%</span>
                        </div>
                    </div>
                    
                    <div class="scan-another-result">
                        <a href="#upload-section" onclick= "gotoindividualupload()" class="btn btn-red">
                            SCAN ANOTHER EGG! 
                            <span class="arrow">‚Üí</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        
        <!-- Guidelines Section -->
        <section class="guidelines">
            <div class="container">
                
                <!-- Guidelines for Single Egg -->
               <div class="guideline-section">
                    <div class="guideline-header yellow">Guidelines for Single Egg</div>
                    <div class="guideline-content">
                        <div class="guideline-columns-container">
                            <div class="guideline-column">
                                <div class="guideline-content-wrapper">
                                    <div class="guideline-text">
                                        <ol>
                                            <li>Go to a shaded/dark area (the darker it is, the better)</li>
                                            <li>Place Egg on top of source of light (flashlight, Camera light, etc.)</li>
                                             <li>Go to a shaded/dark area (the darker it is, the better)</li>
                                            <li>Place Egg on top of source of light (flashlight, Camera light, etc.)</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <div class="guideline-column">
                                <div class="guideline-content-wrapper">
                                    <div class="guideline-image">
                               <img src="images/SINGLE.png" alt="Single egg example" class="zoomable" loading="lazy">
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Guidelines for Egg Scanning by Batch -->
                <div class="guideline-section">
                    <div class="guideline-header yellow">Guidelines for Egg Scanning by Batch</div>
                    <div class="guideline-content">
                        <div class="guideline-columns-container">
                            <div class="guideline-column">
                                <div class="guideline-content-wrapper">
                                    <div class="guideline-text">
                                        <ol>
                                            <li>Go to a shaded/dark area (the darker it is, the better)</li>
                                            <li>Place Egg on top of source of light (flashlight, Camera light, etc.)</li>
                                             <li>Go to a shaded/dark area (the darker it is, the better)</li>
                                            <li>Place Egg on top of source of light (flashlight, Camera light, etc.)</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <div class="guideline-column">
                                <div class="guideline-content-wrapper">
                                    <div class="guideline-image">
                               <img src="images/BATCH.png" alt="Batch egg example" class="zoomable" loading="lazy">
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 
                <div class="text-center mb-3">
                    <a href="#upload-section" class="btn btn-red">SCAN YOUR EGGS NOW!</a>
                    <p class="click-here">Click here!</p>
                </div>
                -->
            </div>
        </section>

        <!-- DIY Section -->
        <section class="diy-panel" aria-labelledby="diy-title">
            <div class="container">
                <h2 id="diy-title" class="diy-title">DIY Egg Carton with Lights</h2>

                <div class="diy-card">
                    <div class="diy-steps">
                        <div class="diy-step" aria-label="Step 1: Materials">
                            <div>
                                <div style="display:flex;align-items:flex-start;">
                                    <div class="diy-step-number">1</div>
                                    <div class="diy-text">
                                        <strong>Materials</strong>
                                        <div style="margin-top:6px;font-size:0.95rem;color: #374151;">
                                            Egg carton and 1‚Äì3 small candles or LED tea lights.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="diy-thumb">
                                <img src="images/STEP 1.png" alt="Materials" class="zoomable" loading="lazy">
                            </div>
                        </div>

                        <div class="diy-step" aria-label="Step 2: Setup">
                            <div>
                                <div style="display:flex;align-items:flex-start;">
                                    <div class="diy-step-number">2</div>
                                    <div class="diy-text">
                                        <strong>Setup</strong>
                                        <div style="margin-top:6px;font-size:0.95rem;color: #374151;">
                                            Cut small holes under each cell and place lights underneath.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="diy-thumb">
                                <img src="images/STEP 2.png" alt="Setup" class="zoomable" loading="lazy">
                            </div>
                        </div>

                        <div class="diy-step" aria-label="Step 3: Use">
                            <div>
                                <div style="display:flex;align-items:flex-start;">
                                    <div class="diy-step-number">3</div>
                                    <div class="diy-text">
                                        <strong>Use</strong>
                                        <div style="margin-top:6px;font-size:0.95rem;color: #374151;">
                                            Light candles / switch on LEDs, place eggs, take top-view photo.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="diy-thumb">
                                <img src="images/STEP 3.png" alt="Final" class="zoomable" loading="lazy">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <!-- Footer content can be added here if needed -->
            </div>
        </footer>
    </main>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeImageModal()">&times;</span>
            <img id="modalImage" class="modal-image" alt="Full size scanned image">
            <div class="modal-caption">
                <p>Full size view of your single egg scan</p>
            </div>
        </div>
    </div>

    <!-- Image Viewer Modal for Guidelines -->
    <div id="image-viewer" class="image-viewer" aria-hidden="true" role="dialog" aria-label="Image viewer">
        <button class="iv-close" aria-label="Close image viewer">&times;</button>
        <img class="iv-img" src="" alt="">
    </div>

    <!-- Scripts -->
    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Image modal functionality
        function openImageModal() {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const scannedImage = document.getElementById('scannedImage');
            
            modal.style.display = 'block';
            modalImage.src = scannedImage.src;
            modalImage.alt = scannedImage.alt;
            
            // Prevent body scrolling when modal is open
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.style.display = 'none';
            
            // Restore body scrolling
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside the image
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeImageModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            }
        });

        // Load uploaded image and results
        document.addEventListener('DOMContentLoaded', function() {
            // Load the uploaded image

            const uploadedImageUrl = localStorage.getItem('eggImage') ||
                'https://via.placeholder.com/400x400/4CAF50/000000?text=Single+Egg+Scan';

            document.getElementById('scannedImage').src = uploadedImageUrl;
            
            // Load and display prediction results
            const results = localStorage.getItem('eggQualityResults');
            if (results) {
                const resultData = JSON.parse(results);
                displayResults(resultData);
            }
        });
        function gotoindividualupload(){
            window.location.href = 'individual-upload.html';
        }
        // Function to display prediction results
        function displayResults(result) {
            // Update status label
            const statusLabel = document.querySelector('.status-label');
            statusLabel.textContent = result.quality;
            statusLabel.className = 'status-label';

            if (result.quality === 'GOOD') {
                statusLabel.classList.add('fresh-status');
            } else if (result.quality === 'MEDIUM') {
                statusLabel.classList.add('medium-status');
            } else {
                statusLabel.classList.add('bad-status');
            }

            // Update metrics
            const yolkMetric = document.querySelector('.metric-value');
            const whiteMetric = document.querySelectorAll('.metric-value')[1];

            yolkMetric.textContent = result.yolk_score + '%';
            whiteMetric.textContent = result.white_score + '%';
        }
    </script>

    <script>
        // Image viewer for zoomable guideline images
        (function(){
            const viewer = document.getElementById('image-viewer');
            if (!viewer) return;
            
            const ivImg = viewer.querySelector('.iv-img');
            const ivClose = viewer.querySelector('.iv-close');
            const zoomables = document.querySelectorAll('.zoomable');
            let lastFocused = null;

            function open(src, alt){
                lastFocused = document.activeElement;
                ivImg.src = '';
                ivImg.alt = alt || '';
                viewer.classList.add('show');
                viewer.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden';

                const img = new Image();
                img.onload = function(){
                    ivImg.src = src;
                    ivImg.alt = alt || '';
                    ivClose.focus();
                };
                img.onerror = function(){
                    ivImg.src = src;
                    ivClose.focus();
                };
                img.src = src;
            }
            
            function close(){
                viewer.classList.remove('show');
                viewer.setAttribute('aria-hidden', 'true');
                ivImg.src = '';
                document.body.style.overflow = '';
                if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
            }

            zoomables.forEach(img => {
                img.style.cursor = 'zoom-in';
                img.addEventListener('click', (e) => {
                    const full = img.dataset && img.dataset.full ? img.dataset.full : img.currentSrc || img.src;
                    open(full, img.alt || '');
                    e.stopPropagation();
                });
            });

            ivClose.addEventListener('click', close);
            viewer.addEventListener('click', e => {
                if (e.target === viewer) close();
            });
            ivImg.addEventListener('click', function(e){
                e.stopPropagation();
            });
            document.addEventListener('keydown', e => {
                if (e.key === 'Escape' && viewer.classList.contains('show')) close();
            });
        })();
    </script>
</body>
</html>